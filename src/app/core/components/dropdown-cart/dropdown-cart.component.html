<!-- DropDown Profile Menu -->
<div
  @enableProfileMenu
  appOutsideClick
  (outsideClick)="closeCartMenu($event)"
  *ngIf="showCartMenu"
  class="fixed right-[8.8rem] xl:w-[480px] max-w-[480px] top-[4.5rem] z-[90] list-none divide-y divide-gray-100 rounded-lg border-2 border-gray-200 bg-white text-base shadow-md transition-shadow duration-300 before:absolute before:bottom-full before:right-2 before:top-[-21px] before:-ml-2 before:h-0 before:w-0 before:border-[10px] before:border-solid before:border-transparent before:border-b-[#BDBDBD] before:content-[''] after:absolute after:bottom-full after:right-2 after:top-[-20px] after:z-[60px] after:-ml-2 after:h-0 after:w-0 after:border-[10px] after:border-solid after:border-transparent after:border-b-white after:content-[''] hover:shadow-lg dark:divide-gray-300/[.08] dark:divide-gray-600 dark:border-gray5/10 dark:bg-gray6 dark:text-gray-100 dark:before:border-b-gray5/10 dark:after:border-b-gray6 dark:hover:shadow-md dark:hover:shadow-gray6 md:right-[8.6rem] lg:right-[12.8rem] xl:right-[12.5rem] 3xl:right-[15.5rem]"
>
  <div
    class="flex flex-col items-center justify-between max-h-[468px]"
    role="dropdown-content"
  >
    <div class="flex-none w-full" role="header" id="header">
      <div
        class="flex border-solid border-b dark:border-gray-100/10 border-gray5 items-center justify-start min-h-12"
      >
        <h2
          class="ml-4 grow font-semibold font-sans text-gray-900 dark:text-gray-300 text-lg"
        >
          Cart Packaging
        </h2>
        <button
          type="button"
          title="settings cart"
          class="flex relative items-center h-full leading-8 transform flex-row flex-nowrap gap-1 font-medium py-2 px-2 duration-300 rounded-full transition-colors hover:bg-gray-400/[0.5] dark:hover:bg-gray-700/20 dark:focus:bg-gray-700/[0.8] focus:bg-gray-400/[0.8] text-gray1/[.8] dark:text-gray-100 dark:hover:text-gray-300"
        >
          <mat-icon class="text-xl !size-7 leading-7">settings</mat-icon>
        </button>
      </div>
    </div>
    <div
      role="container"
      id="container"
      class="overflow-y-auto scrollbar w-full pr-2"
    >
      <ul
        class="py-1 min-w-[15rem]"
        id="sections"
        *ngIf="cartItems$ | async as items"
      >
        <!-- Title -->
        <div id="Configuration">
          <h2
            class="text-base font-mono mt-5 mb-2 ml-[18px] dark:text-gray-100 text-gray4 font-normal"
          >
            Configurations
          </h2>
        </div>
        @for (item of items | keyvalue | reverse; track item.key) {
        <li *ngIf="item.key !== 'uid'">
          <!-- content -->
          <div
            class="relative py-2 pr-4 cursor-pointer text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-300/[.08] dark:hover:text-white"
          >
            <a
              (click)="openLinkMenu($event, item.key)"
              routerLinkActive="Active"
              routerLink=""
              class="flex flex-row items-center justify-start text-center text-sm min-h-20"
            >
              <div
                id="new"
                class="bg-blue-600 w-1 h-1 p-[3px] rounded-full m-[0_6px_0]"
              ></div>
              <div class="mr-4 flex items-center">
                <mat-icon
                  [svgIcon]="switchIcon(item.key)"
                  class="font-bold !size-10 text-gray-800 dark:text-gray-200 leading-7"
                ></mat-icon>
              </div>
              <div
                class="flex flex-col grow text-start item-center justify-start"
              >
                <span
                  class="text-base font-medium text-gray-700 dark:text-gray-200 text-wrap line-clamp-5"
                >
                  {{ item.value["title"] }}
                </span>
                <div>
                  <span class="text-gray-700 dark:text-gray5">{{
                    parseCartItemDate(item.value["created_At"])
                  }}</span>
                </div>
              </div>
              <div class="mr-3">
                <span class="text-gray-700 dark:text-pink-300">{{
                  item.key
                }}</span>
              </div>
            </a>
            <div class="absolute -right-2 top-2">
              <button
                type="button"
                class="text-base inline-flex items-center text-center !size-8 font-medium h-full leading-6 transform flex-row flex-nowrap duration-300 rounded-full transition-colors hover:bg-gray-400/[0.5] dark:hover:bg-gray-700/20 dark:focus:bg-gray-700/[0.8] focus:bg-gray-400/[0.8] text-gray1/[.8] dark:text-gray-100 dark:hover:text-gray-300"
              >
                <mat-icon
                  fontSet="material-icons-outlined"
                  class="text-lg text-gray-600 dark:text-gray-300/80 !size-8 !leading-8"
                  >more_vert</mat-icon
                >
              </button>
            </div>
          </div>
        </li>
        }
      </ul>

      <div class="footer"></div>
    </div>
    <!-- <div
    class="truncate text-sm font-medium text-gray-900 dark:text-gray-300"
    role="none"
  >
    <div *ngIf="packagesLoading">
      <div
        class="relative h-4 w-32 animate-pulse rounded bg-gray-200 dark:bg-gray-400"
      ></div>
    </div>
    
  </div> -->
  </div>
</div>
