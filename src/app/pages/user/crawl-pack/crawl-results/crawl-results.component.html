<form
  [formGroup]="resultsForm"
  (ngSubmit)="saveCrawlResultsConfig()"
  class="w-full grid grid-cols-1 sm:grid-cols-[1fr_13rem] xl:grid-cols-[1fr_13rem] lg:grid-cols-1 2xl:grid-cols-[1fr_20rem] gap-4"
>
  <div
    class="mx-auto w-full pt-6 order-2 px-4 sm:order-1 lg:order-2 xl:order-1"
  >
    <h1
      class="text-3xl text-center font-bold mb-8 text-gray-800 dark:text-gray-200"
    >
      Crawl Results
    </h1>

    <div class="w-full text-center inline-flex items-center justify-center">
      <mat-icon
        aria-label="results"
        svgIcon="results"
        class="font-bold !size-40 mb-4 text-gray-800 dark:text-gray-200"
      ></mat-icon>
    </div>

    <h3
      id="controlling-each-crawl-result"
      class="text-xl py-8 font-weight-light text-gray-800 dark:text-gray-200"
    >
      Controlling Each CrawlResult
    </h3>

    <!--  Parameters Hilights -->
    <p class="mb-8 font-mono max-w-screen-md text-gray-800 dark:text-gray-200">
      Crawl4AI returns a
      <span class="text-sky-500 bg-sky-700/10">CrawlResult</span>
      object containing everything you might need—raw HTML, a cleaned version,
      optional screenshots or PDFs, structured extraction results, and more.
      This document explains those fields and how they map to different output
      types.
    </p>

    <h3
      class="flex flex-wrap justify-between mb-4 text-xl font-light text-gray-800 dark:text-gray-200"
    >
      <span>Recent Configs</span>
      <button
        title="add new profile"
        type="button"
        (click)="addNewCrawlResults()"
        [ngClass]="
          !newConfigOpened
            ? 'hover:bg-gray-400/[0.5] dark:hover:bg-gray-700/20 dark:focus:bg-gray-700/[0.7] focus:bg-gray-400/[0.8] text-gray1/[.8] dark:text-gray-100 dark:hover:text-gray-300'
            : 'bg-red-400/[.08] hover:border-gray-600/[0.5] focus:border-gray-900/[0.8] border-gray-600/[.8] dark:hover:border-red-600/[0.5] dark:focus:border-red-900/[0.8] dark:border-red-600/[.8] text-red-500/[.8] dark:text-red-100 dark:hover:text-red-300'
        "
        class="flex items-center h-full leading-6 transform flex-row flex-nowrap gap-1 font-medium py-2 px-2 duration-300 rounded-full transition-colors"
      >
        <mat-icon
          [ngClass]="
            !newConfigOpened
              ? 'text-gray-600 dark:text-gray-300/80'
              : '-rotate-45'
          "
          class="text-3xl transition-transform !size-8 leading-8"
          >add</mat-icon
        >
      </button>
    </h3>

    <!-- Recent Crawl Config Async List -->
    <div class="w-full md:w-12/12 xl:w-12/12">
      @if ((crawlResults$ | async )?.length) {

      <div
        *ngIf="crawlResults$ | async as results"
        class="mb-8 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 min-h-40"
      >
        <div
          *ngFor="let result of results; let i = index"
          (click)="onSelectCrawlResult(result)"
          [ngClass]="{
            'bg-gray-300/70 dark:bg-gray-600/50':
              showSettings && result.id === configSelectedById
          }"
          class="cursor-pointer flex flex-col gap-4 justify-between border rounded-xl p-4 border-gray-200 hover:border-gray-300/70 dark:hover:border-gray-600/0 hover:bg-gray-300/70 dark:border-gray-600 dark:hover:bg-gray-600/50"
        >
          <div class="flex justify-between items-start mb-4 gap-4">
            <div class="flex items-start">
              <mat-icon
                svgIcon="crawlresults"
                class="mr-2 !text-cyan-500 dark:!text-cyan-500 text-sm max-h-[2.4rem] max-w-[2.4rem] !w-fit !h-fit"
              ></mat-icon>
              <span
                class="text-base font-medium text-gray-700 dark:text-gray-200 text-wrap line-clamp-2"
                >{{ result.title }}</span
              >
            </div>
            <button
              type="button"
              (click)="actionProfileClicked($event, result)"
              class="text-base inline-flex items-center text-center !size-8 font-medium h-full leading-6 transform flex-row flex-nowrap duration-300 rounded-full transition-colors hover:bg-gray-400/[0.5] dark:hover:bg-gray-900/70 dark:focus:bg-purple-700/[0.4] focus:bg-gray-400/[0.8] text-gray1/[.8] dark:text-gray-100 dark:hover:text-gray-300"
            >
              <mat-icon
                fontSet="material-icons-outlined"
                class="text-lg text-gray-600 dark:text-gray-300/80 !size-8 !leading-8"
                >more_vert</mat-icon
              >
            </button>
          </div>
          <div
            class="flex justify-between text-sm text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700"
          >
            <span>{{ result.created_At | date : "MMMM dd, yyyy" }}</span>
            <span
              ><mat-icon
                fontSet="material-icons-outlined"
                class="mr-2 text-blue-400 dark:text-blue-300"
                >web</mat-icon
              >
              <mat-icon
                fontSet="material-icons-outlined"
                class="mr-2 text-gray-600 dark:text-green-200"
              >
                cloud_done
              </mat-icon></span
            >
          </div>
          <div
            class="flex justify-center items-end text-gray-500 dark:text-gray-400"
          >
            <a
              *ngIf="result.id === (packCart$ | async)?.id"
              (click)="removeConfigPackFromCart($event)"
              class="text-base text-center border border-green-600/80 leading-[0] gap-1 hover:bg-green-600/[0.5] focus:bg-green-900/[0.8] bg-transparent text-gray1 dark:text-gray-100 dark:hover:text-gray-300 font-medium py-2 px-4 duration-300 rounded-full transition-colors"
            >
              <mat-icon>close</mat-icon>
              <mat-icon
                svgIcon="package-box"
                class="font-bold !w-[2rem] !h-[1.6rem] text-sm"
              ></mat-icon
            ></a>
            <a
              *ngIf="result.id !== (packCart$ | async)?.id"
              (click)="addConfigPackToCart($event, result)"
              class="text-base text-center border border-transparent leading-[0] gap-1 hover:bg-green-600/[0.5] focus:bg-green-900/[0.8] bg-green-600/[.8] text-gray1 dark:text-gray-100 dark:hover:text-gray-300 font-medium py-2 px-4 duration-300 rounded-full transition-colors"
            >
              <mat-icon>add</mat-icon>
              <mat-icon
                svgIcon="package-box"
                class="font-bold !w-[2rem] !h-[1.6rem] text-sm"
              ></mat-icon
            ></a>
          </div>
        </div>
      </div>
      }

      <!-- Loading state -->
      <div
        *ngIf="!(crawlResults$ | async) && (crawlResults$ | async) !== null"
        class="mb-8 w-full grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 min-h-40"
      >
        <div
          *ngFor="let item of [1, 2, 3, 4, 5]"
          class="relative h-40 w-full px-[.7rem] py-1 animate-pulse rounded-lg bg-gray3 dark:bg-gray4/60"
        ></div>
      </div>

      @if((crawlResults$ | async)?.length === 0) {
      <div class="text-center py-8">
        <p class="text-gray-600 dark:text-gray-300">
          No crawler results configuration created yet. Click the 'plus' button
          to add a new result configuration.
        </p>
      </div>
      } @if((crawlResults$ | async) === null) {
      <div class="text-center py-8">
        <p class="text-red-600 dark:text-red-300">
          An Error Occured. Please try again later. or contact with
          administrator. find the feedback button in the sidebar
        </p>
      </div>
      }
    </div>

    <h3
      *ngIf="showSettings"
      class="mb-8 text-xl font-light text-gray-800 dark:text-gray-200"
    >
      <span>
        CrawlResult Config
        <span
          [ngClass]="{
            'text-green-400 bg-green-600/10': newConfigOpened,
            'text-yellow-900 bg-yellow-600/10': !newConfigOpened,
          }"
          class="p-2 rounded-xl"
          >{{ !newConfigOpened ? "Selected" : "New" }}</span
        >
      </span>
      <span *ngIf="newConfigOpened" class="text-red-400">*</span>
    </h3>

    <div
      *ngIf="showSettings"
      class="border rounded-xl p-4 border-gray-200 dark:border-gray6/70"
    >
      <div class="border-b-2 border-gray-200 dark:border-gray-700 mb-8 gap-1">
        @if (!newConfigOpened) {
        <div
          class="flex justify-center items-center mb-4 dark:hover:text-white text-slate-500 dark:text-gray-100 gap-2"
        >
          <mat-icon class="">travel_explore</mat-icon>
          <h3 class="text-2xl font-semibold text-gray-800 dark:text-gray-200">
            {{ resultsForm.get("title")?.value }}
          </h3>
        </div>
        } @else {
        <div
          class="flex justify-between items-center mb-4 dark:hover:text-white text-slate-500 dark:text-gray-100 gap-2"
        >
          <div class="w-full">
            <app-stinput
              [control]="resultsForm.get('title') | formControl"
              [leftIcon]="'person'"
              [label]="'Title'"
              [errorLabel]="getErrorLabel('title')"
            ></app-stinput>
          </div>
          <!-- <div>
          {{ resultsForm.errors | json }}
        </div> -->
          <div>
            <button
              type="submit"
              [disabled]="resultsForm.invalid || savingNewConfig"
              [ngClass]="{
                'bg-green-600/[.2] dark:bg-green-600/[0.2]':
                  resultsForm.invalid || savingNewConfig
              }"
              title="save new profile"
              class="inline-flex text-lg min-w-32 items-center justify-center text-center border border-transparent leading-[0] gap-2 hover:bg-green-600/[0.5] focus:bg-green-900/[0.8] bg-green-600/[.8] text-gray1 dark:text-gray-100 dark:hover:text-gray-300 font-medium py-3 px-4 duration-300 rounded-full transition-colors"
            >
              @if (!savingNewConfig) {
              <span>save</span>
              <mat-icon class="font-bold !w-[2rem] !h-[1.6rem]">save</mat-icon>
              } @else {
              <mat-spinner
                [diameter]="20"
                class="stroke-gray-200"
              ></mat-spinner>
              }
            </button>
          </div>
        </div>
        }
        <!-- Parameters to Set -->
        <div>
          <h3 class="text-xl font-normal text-gray-800 dark:text-gray-200">
            Parameters Highlights
          </h3>
          <h2 class="text-sm py-4 font-normal text-gray-800 dark:text-gray-200">
            We group them by category.
          </h2>
        </div>
      </div>

      <!-- How to manage Crawl Results -->
      <h3
        class="flex items-center p-4 rounded-xl bg-[#dce7ec] dark:bg-[#1b1d1e] gap-2 mb-4 text-xl font-weight-light text-gray-800 dark:text-gray-200"
        id="html-variants"
        (mouseover)="showLink = true"
        (mouseleave)="showLink = false"
      >
        <span class="border-b-4 border-gray5">HTML Variants</span>
        <a
          (click)="scrollTo('html-variants')"
          *ngIf="showLink"
          class="inline-flex cursor-pointer items-center justify-center"
        >
          <mat-icon class="text-gray-600 dark:text-gray4">link</mat-icon>
        </a>

        <!-- Set a radio button to defaults Enabled/Disabled -->
      </h3>

      <div class="space-y-4 p-4">
        <!-- HTML Variants Results -->
        <div class="grid grid-cols-1 gap-10 mb-8">
          <div
            class="grid grid-cols-2 items-center sm:grid-cols-[1fr_13rem] gap-4"
          >
            <div class="relative flex flex-col gap-4">
              <label
                class="block before:content['*'] before:size-2 before:absolute before:text-sky-500 before:bg-green-700 before:shadow-xl before:shadow-gray-50 before:border before:border-sky-400 before:rounded-[50%] before:-left-4 before:top-[7px] text-base font-medium text-gray-700 dark:text-gray-200"
              >
                Raw HTML
              </label>

              <div
                class="block font-mono max-w-screen-md text-gray-800 dark:text-gray-200"
              >
                <span
                  >Original, unmodified page HTML. Good for debugging or custom
                  processing.</span
                >
                <span>&nbsp;</span>
                <span>Crawl4AI preserves the exact HTML as </span>
                <p
                  class="text-sky-500 bg-sky-700/10 inline-block w-full xs:w-[initial]"
                >
                  result.html
                </p>

                <span>. Useful for:</span>
                <br />
                <span
                  >- Debugging page issues or checking the original content.
                </span>
                <br />
                <span>- Performing your own specialized parse if needed.</span>
              </div>
            </div>
            <label
              class="block text-sm justify-self-end font-medium text-gray-700 dark:text-gray-200"
            >
              <!-- Set a radio button Enabled/Disabled -->
              <app-radiotoggle
                title="Enabled/Disabled"
                identity="html"
                [control]="resultsForm.get('html') | formControl"
              ></app-radiotoggle>
            </label>
          </div>
          <div
            class="grid grid-cols-2 items-center sm:grid-cols-[1fr_13rem] gap-4"
          >
            <div class="relative flex flex-col gap-4">
              <label
                class="block before:content['*'] before:size-2 before:absolute before:text-sky-500 before:bg-green-700 before:shadow-xl before:shadow-gray-50 before:border before:border-sky-400 before:rounded-[50%] before:-left-4 before:top-[7px] text-base font-medium text-gray-700 dark:text-gray-200"
              >
                Cleaned html
              </label>

              <div
                class="block font-mono max-w-screen-md text-gray-800 dark:text-gray-200"
              >
                <span
                  >Sanitized HTML with scripts/styles removed; can exclude tags
                  If you specify any cleanup or exclusion parameters in
                </span>
                <span>&nbsp;</span>
                <p
                  class="text-sky-500 bg-sky-700/10 inline-block w-full xs:w-[initial]"
                >
                  CrawlerRunConfig
                </p>

                <span> (like </span>
                <p
                  class="text-sky-500 bg-sky-700/10 inline-block w-full xs:w-[initial]"
                >
                  excluded_tags
                </p>
                <span>, </span>
                <p
                  class="text-sky-500 bg-sky-700/10 inline-block w-full xs:w-[initial]"
                >
                  remove_forms
                </p>

                <span>, etc.)</span>
              </div>
            </div>
            <label
              class="block text-sm justify-self-end font-medium text-gray-700 dark:text-gray-200"
            >
              <!-- Set a radio button Enabled/Disabled -->
              <app-radiotoggle
                title="Enabled/Disabled"
                identity="cleanedHtml"
                [control]="resultsForm.get('cleanedHtml') | formControl"
              ></app-radiotoggle>
            </label>
          </div>
        </div>
      </div>
      <h3
        class="flex items-center p-4 rounded-xl bg-[#dce7ec] dark:bg-[#1b1d1e] gap-2 mb-4 text-xl font-weight-light text-gray-800 dark:text-gray-200"
        id="markdown-generation"
        (mouseover)="showLink = true"
        (mouseleave)="showLink = false"
      >
        <span class="border-b-4 border-gray5">Markdown Generation</span>
        <a
          (click)="scrollTo('markdown-generation')"
          *ngIf="showLink"
          class="inline-flex cursor-pointer items-center justify-center"
        >
          <mat-icon class="text-gray-600 dark:text-gray4">link</mat-icon>
        </a>

        <!-- Set a radio button to defaults Enabled/Disabled -->
      </h3>
      <div class="space-y-4 p-4">
        <!-- Markdown Generation Results -->
        <div class="grid grid-cols-1 gap-10 mb-8">
          <div
            class="grid grid-cols-2 items-center sm:grid-cols-[1fr_13rem] gap-4"
          >
            <div class="relative flex flex-col gap-4">
              <label
                class="block before:content['*'] before:size-2 before:absolute before:text-sky-500 before:bg-green-700 before:shadow-xl before:shadow-gray-50 before:border before:border-sky-400 before:rounded-[50%] before:-left-4 before:top-[7px] text-base font-medium text-gray-700 dark:text-gray-200"
              >
                Raw Markdown
              </label>

              <div
                class="block font-mono max-w-screen-md text-gray-800 dark:text-gray-200"
              >
                <span>It holds a </span>
                <p
                  class="text-sky-500 bg-sky-700/10 inline-block w-full xs:w-[initial]"
                >
                  MarkdownGenerationResult
                </p>
                <span>. Over time, this will be consolidated into </span>
                <p
                  class="text-sky-500 bg-sky-700/10 inline-block w-full xs:w-[initial]"
                >
                  markdown
                </p>

                <span
                  >. The generator can provide raw markdown, citations,
                  references, and optionally
                </span>
                <p
                  class="text-sky-500 bg-sky-700/10 inline-block w-full xs:w-[initial]"
                >
                  fit_markdown
                </p>

                <span>.</span>
              </div>
            </div>
            <label
              class="block text-sm justify-self-end font-medium text-gray-700 dark:text-gray-200"
            >
              <!-- Set a radio button Enabled/Disabled -->
              <app-radiotoggle
                title="Enabled/Disabled"
                identity="rawMarkdown"
                [control]="resultsForm.get('rawMarkdown') | formControl"
              ></app-radiotoggle>
            </label>
          </div>
          <div
            class="grid grid-cols-2 items-center sm:grid-cols-[1fr_13rem] gap-4"
          >
            <div class="relative flex flex-col gap-4">
              <label
                class="block before:content['*'] before:size-2 before:absolute before:text-sky-500 before:bg-green-700 before:shadow-xl before:shadow-gray-50 before:border before:border-sky-400 before:rounded-[50%] before:-left-4 before:top-[7px] text-base font-medium text-gray-700 dark:text-gray-200"
              >
                Markdown With Citations
              </label>

              <div
                class="block font-mono max-w-screen-md text-gray-800 dark:text-gray-200"
              >
                <span>
                  Markdown including inline citations that reference links at
                  the end.</span
                >
              </div>
            </div>
            <label
              class="block text-sm justify-self-end font-medium text-gray-700 dark:text-gray-200"
            >
              <!-- Set a radio button Enabled/Disabled -->
              <app-radiotoggle
                title="Enabled/Disabled"
                identity="markdownWithCitations"
                [control]="
                  resultsForm.get('markdownWithCitations') | formControl
                "
              ></app-radiotoggle>
            </label>
          </div>
          <div
            class="grid grid-cols-2 items-center sm:grid-cols-[1fr_13rem] gap-4"
          >
            <div class="relative flex flex-col gap-4">
              <label
                class="block before:content['*'] before:size-2 before:absolute before:text-sky-500 before:bg-green-700 before:shadow-xl before:shadow-gray-50 before:border before:border-sky-400 before:rounded-[50%] before:-left-4 before:top-[7px] text-base font-medium text-gray-700 dark:text-gray-200"
              >
                References Markdown
              </label>

              <div
                class="block font-mono max-w-screen-md text-gray-800 dark:text-gray-200"
              >
                <span> The references/citations themselves (if </span>
                <p
                  class="text-sky-500 bg-sky-700/10 inline-block w-full xs:w-[initial]"
                >
                  citations=True
                </p>
                <span>).</span>
              </div>
            </div>
            <label
              class="block text-sm justify-self-end font-medium text-gray-700 dark:text-gray-200"
            >
              <!-- Set a radio button Enabled/Disabled -->
              <app-radiotoggle
                title="Enabled/Disabled"
                identity="referencesMarkdown"
                [control]="resultsForm.get('referencesMarkdown') | formControl"
              ></app-radiotoggle>
            </label>
          </div>
          <div
            class="grid grid-cols-2 items-center sm:grid-cols-[1fr_13rem] gap-4"
          >
            <div class="relative flex flex-col gap-4">
              <label
                class="block before:content['*'] before:size-2 before:absolute before:text-sky-500 before:bg-green-700 before:shadow-xl before:shadow-gray-50 before:border before:border-sky-400 before:rounded-[50%] before:-left-4 before:top-[7px] text-base font-medium text-gray-700 dark:text-gray-200"
              >
                Fit Markdown
              </label>

              <div
                class="block font-mono max-w-screen-md text-gray-800 dark:text-gray-200"
              >
                <span
                  >The filtered/“fit” markdown if a content filter was
                  used.</span
                >
              </div>
            </div>
            <label
              class="block text-sm justify-self-end font-medium text-gray-700 dark:text-gray-200"
            >
              <!-- Set a radio button Enabled/Disabled -->
              <app-radiotoggle
                title="Enabled/Disabled"
                identity="fitMarkdown"
                [control]="resultsForm.get('fitMarkdown') | formControl"
              ></app-radiotoggle>
            </label>
          </div>
          <div
            class="grid grid-cols-2 items-center sm:grid-cols-[1fr_13rem] gap-4"
          >
            <div class="relative flex flex-col gap-4">
              <label
                class="block before:content['*'] before:size-2 before:absolute before:text-sky-500 before:bg-green-700 before:shadow-xl before:shadow-gray-50 before:border before:border-sky-400 before:rounded-[50%] before:-left-4 before:top-[7px] text-base font-medium text-gray-700 dark:text-gray-200"
              >
                Fit HTML
              </label>

              <div
                class="block font-mono max-w-screen-md text-gray-800 dark:text-gray-200"
              >
                <span>The filtered HTML that generated </span>
                <p
                  class="text-sky-500 bg-sky-700/10 inline-block w-full xs:w-[initial]"
                >
                  fit_markdown
                </p>
                <span>. if a content filter was used.</span>
              </div>
            </div>
            <label
              class="block text-sm justify-self-end font-medium text-gray-700 dark:text-gray-200"
            >
              <!-- Set a radio button Enabled/Disabled -->
              <app-radiotoggle
                title="Enabled/Disabled"
                identity="fitHtml"
                [control]="resultsForm.get('fitHtml') | formControl"
              ></app-radiotoggle>
            </label>
          </div>
        </div>
      </div>

      <h3
        class="flex items-center p-4 rounded-xl bg-[#dce7ec] dark:bg-[#1b1d1e] gap-2 mb-4 text-xl font-weight-light text-gray-800 dark:text-gray-200"
        id="structured-extraction"
        (mouseover)="showLink = true"
        (mouseleave)="showLink = false"
      >
        <span class="border-b-4 border-gray5">Structured Extraction</span>
        <a
          (click)="scrollTo('structured-extraction')"
          *ngIf="showLink"
          class="inline-flex cursor-pointer items-center justify-center"
        >
          <mat-icon class="text-gray-600 dark:text-gray4">link</mat-icon>
        </a>

        <!-- Set a radio button to defaults Enabled/Disabled -->
      </h3>

      <div class="space-y-4 p-4">
        <!-- Structured Extraction Results -->
        <div class="grid grid-cols-1 gap-10 mb-8">
          <div
            class="grid grid-cols-2 items-center sm:grid-cols-[1fr_13rem] gap-4"
          >
            <div class="relative flex flex-col gap-4">
              <label
                class="block before:content['*'] before:size-2 before:absolute before:text-sky-500 before:bg-green-700 before:shadow-xl before:shadow-gray-50 before:border before:border-sky-400 before:rounded-[50%] before:-left-4 before:top-[7px] text-base font-medium text-gray-700 dark:text-gray-200"
              >
                Extracted Content
              </label>

              <div
                class="block font-mono max-w-screen-md text-gray-800 dark:text-gray-200"
              >
                <span
                  >If you run a JSON-based extraction strategy (CSS, XPath, LLM,
                  etc.), the structured data is not stored in
                </span>
                <p
                  class="text-sky-500 bg-sky-700/10 inline-block w-full xs:w-[initial]"
                >
                  markdown
                </p>
                <span>—it’s placed in </span>
                <p
                  class="text-sky-500 bg-sky-700/10 inline-block w-full xs:w-[initial]"
                >
                  result.extracted_content
                </p>

                <span> as a JSON string (or sometimes plain text).</span>
              </div>
            </div>
            <label
              class="block text-sm justify-self-end font-medium text-gray-700 dark:text-gray-200"
            >
              <!-- Set a radio button Enabled/Disabled -->
              <app-radiotoggle
                title="Enabled/Disabled"
                identity="extractedContent"
                [control]="resultsForm.get('extractedContent') | formControl"
              ></app-radiotoggle>
            </label>
          </div>
        </div>
      </div>
      <h3
        class="flex items-center p-4 rounded-xl bg-[#dce7ec] dark:bg-[#1b1d1e] gap-2 mb-4 text-xl font-weight-light text-gray-800 dark:text-gray-200"
        id="more-fields"
        (mouseover)="showLink = true"
        (mouseleave)="showLink = false"
      >
        <span class="border-b-4 border-gray5">Links Media and More</span>
        <a
          (click)="scrollTo('more-fields')"
          *ngIf="showLink"
          class="inline-flex cursor-pointer items-center justify-center"
        >
          <mat-icon class="text-gray-600 dark:text-gray4">link</mat-icon>
        </a>

        <!-- Set a radio button to defaults Enabled/Disabled -->
      </h3>
      <div class="space-y-4 p-4">
        <!-- More Fields: Links, Media, and More Results -->
        <div class="grid grid-cols-1 gap-10 mb-8">
          <div
            class="grid grid-cols-2 items-center sm:grid-cols-[1fr_13rem] gap-4"
          >
            <div class="relative flex flex-col gap-4">
              <label
                class="block before:content['*'] before:size-2 before:absolute before:text-sky-500 before:bg-green-700 before:shadow-xl before:shadow-gray-50 before:border before:border-sky-400 before:rounded-[50%] before:-left-4 before:top-[7px] text-base font-medium text-gray-700 dark:text-gray-200"
              >
                Media
              </label>

              <div
                class="block font-mono max-w-screen-md text-gray-800 dark:text-gray-200"
              >
                <span>
                  Extracted media info (images, audio, etc.), each with
                  attributes like
                </span>
                <p
                  class="text-sky-500 bg-sky-700/10 inline-block w-full xs:w-[initial]"
                >
                  src
                </p>
                <span>, </span>
                <p
                  class="text-sky-500 bg-sky-700/10 inline-block w-full xs:w-[initial]"
                >
                  alt
                </p>
                <span>, </span>
                <p
                  class="text-sky-500 bg-sky-700/10 inline-block w-full xs:w-[initial]"
                >
                  score
                </p>

                <span>, etc.</span>
              </div>
            </div>
            <label
              class="block text-sm justify-self-end font-medium text-gray-700 dark:text-gray-200"
            >
              <!-- Set a radio button Enabled/Disabled -->
              <app-radiotoggle
                title="Enabled/Disabled"
                identity="media"
                [control]="resultsForm.get('media') | formControl"
              ></app-radiotoggle>
            </label>
          </div>
          <div
            class="grid grid-cols-2 items-center sm:grid-cols-[1fr_13rem] gap-4"
          >
            <div class="relative flex flex-col gap-4">
              <label
                class="block before:content['*'] before:size-2 before:absolute before:text-sky-500 before:bg-green-700 before:shadow-xl before:shadow-gray-50 before:border before:border-sky-400 before:rounded-[50%] before:-left-4 before:top-[7px] text-base font-medium text-gray-700 dark:text-gray-200"
              >
                Links
              </label>

              <div
                class="block font-mono max-w-screen-md text-gray-800 dark:text-gray-200"
              >
                <span> Extracted link data, split by </span>
                <p
                  class="text-sky-500 bg-sky-700/10 inline-block w-full xs:w-[initial]"
                >
                  internal
                </p>
                <span> and </span>
                <p
                  class="text-sky-500 bg-sky-700/10 inline-block w-full xs:w-[initial]"
                >
                  external
                </p>
                <span>. Each link usually has </span>
                <p
                  class="text-sky-500 bg-sky-700/10 inline-block w-full xs:w-[initial]"
                >
                  href
                </p>

                <span>, </span>
                <p
                  class="text-sky-500 bg-sky-700/10 inline-block w-full xs:w-[initial]"
                >
                  text
                </p>
                <span>, etc. </span>
              </div>
            </div>
            <label
              class="block text-sm justify-self-end font-medium text-gray-700 dark:text-gray-200"
            >
              <!-- Set a radio button Enabled/Disabled -->
              <app-radiotoggle
                title="Enabled/Disabled"
                identity="links"
                [control]="resultsForm.get('links') | formControl"
              ></app-radiotoggle>
            </label>
          </div>
          <div
            class="grid grid-cols-2 items-center sm:grid-cols-[1fr_13rem] gap-4"
          >
            <div class="relative flex flex-col gap-4">
              <label
                class="block before:content['*'] before:size-2 before:absolute before:text-sky-500 before:bg-green-700 before:shadow-xl before:shadow-gray-50 before:border before:border-sky-400 before:rounded-[50%] before:-left-4 before:top-[7px] text-base font-medium text-gray-700 dark:text-gray-200"
              >
                Downloaded Files
              </label>

              <div
                class="block font-mono max-w-screen-md text-gray-800 dark:text-gray-200"
              >
                <span>If </span>
                <p
                  class="text-sky-500 bg-sky-700/10 inline-block w-full xs:w-[initial]"
                >
                  accept_downloads=True
                </p>
                <span> in </span>
                <p
                  class="text-sky-500 bg-sky-700/10 inline-block w-full xs:w-[initial]"
                >
                  BrowserConfig
                </p>
                <span>, this lists the filepaths of saved downloads.</span>
              </div>
            </div>
            <label
              class="block text-sm justify-self-end font-medium text-gray-700 dark:text-gray-200"
            >
              <!-- Set a radio button Enabled/Disabled -->
              <app-radiotoggle
                title="Enabled/Disabled"
                identity="downloadFiles"
                [control]="resultsForm.get('downloadFiles') | formControl"
              ></app-radiotoggle>
            </label>
          </div>
          <div
            class="grid grid-cols-2 items-center sm:grid-cols-[1fr_13rem] gap-4"
          >
            <div class="relative flex flex-col gap-4">
              <label
                class="block before:content['*'] before:size-2 before:absolute before:text-sky-500 before:bg-green-700 before:shadow-xl before:shadow-gray-50 before:border before:border-sky-400 before:rounded-[50%] before:-left-4 before:top-[7px] text-base font-medium text-gray-700 dark:text-gray-200"
              >
                ScreenShot
              </label>

              <div
                class="block font-mono max-w-screen-md text-gray-800 dark:text-gray-200"
              >
                <span>Screenshot of the page (base64-encoded) if </span>
                <p
                  class="text-sky-500 bg-sky-700/10 inline-block w-full xs:w-[initial]"
                >
                  screenshot=True
                </p>
                <span>.</span>
              </div>
            </div>
            <label
              class="block text-sm justify-self-end font-medium text-gray-700 dark:text-gray-200"
            >
              <!-- Set a radio button Enabled/Disabled -->
              <app-radiotoggle
                title="Enabled/Disabled"
                identity="screenshot"
                [control]="resultsForm.get('screenshot') | formControl"
              ></app-radiotoggle>
            </label>
          </div>
          <div
            class="grid grid-cols-2 items-center sm:grid-cols-[1fr_13rem] gap-4"
          >
            <div class="relative flex flex-col gap-4">
              <label
                class="block before:content['*'] before:size-2 before:absolute before:text-sky-500 before:bg-green-700 before:shadow-xl before:shadow-gray-50 before:border before:border-sky-400 before:rounded-[50%] before:-left-4 before:top-[7px] text-base font-medium text-gray-700 dark:text-gray-200"
              >
                ScreenShot
              </label>

              <div
                class="block font-mono max-w-screen-md text-gray-800 dark:text-gray-200"
              >
                <span>PDF of the page if </span>
                <p
                  class="text-sky-500 bg-sky-700/10 inline-block w-full xs:w-[initial]"
                >
                  pdf=True
                </p>
                <span>.</span>
              </div>
            </div>
            <label
              class="block text-sm justify-self-end font-medium text-gray-700 dark:text-gray-200"
            >
              <!-- Set a radio button Enabled/Disabled -->
              <app-radiotoggle
                title="Enabled/Disabled"
                identity="pdf"
                [control]="resultsForm.get('pdf') | formControl"
              ></app-radiotoggle>
            </label>
          </div>
          <div
            class="grid grid-cols-2 items-center sm:grid-cols-[1fr_13rem] gap-4"
          >
            <div class="relative flex flex-col gap-4">
              <label
                class="block before:content['*'] before:size-2 before:absolute before:text-sky-500 before:bg-green-700 before:shadow-xl before:shadow-gray-50 before:border before:border-sky-400 before:rounded-[50%] before:-left-4 before:top-[7px] text-base font-medium text-gray-700 dark:text-gray-200"
              >
                Metadata
              </label>

              <div
                class="block font-mono max-w-screen-md text-gray-800 dark:text-gray-200"
              >
                <span>Additional info about the crawl or extracted data. </span>
              </div>
            </div>
            <label
              class="block text-sm justify-self-end font-medium text-gray-700 dark:text-gray-200"
            >
              <!-- Set a radio button Enabled/Disabled -->
              <app-radiotoggle
                title="Enabled/Disabled"
                identity="metadata"
                [control]="resultsForm.get('metadata') | formControl"
              ></app-radiotoggle>
            </label>
          </div>
          <div
            class="grid grid-cols-2 items-center sm:grid-cols-[1fr_13rem] gap-4"
          >
            <div class="relative flex flex-col gap-4">
              <label
                class="block before:content['*'] before:size-2 before:absolute before:text-sky-500 before:bg-green-700 before:shadow-xl before:shadow-gray-50 before:border before:border-sky-400 before:rounded-[50%] before:-left-4 before:top-[7px] text-base font-medium text-gray-700 dark:text-gray-200"
              >
                Error Message
              </label>

              <div
                class="block font-mono max-w-screen-md text-gray-800 dark:text-gray-200"
              >
                <span>If </span>
                <p
                  class="text-sky-500 bg-sky-700/10 inline-block w-full xs:w-[initial]"
                >
                  success=False
                </p>
                <span>, contains a short description of what went wrong.</span>
              </div>
            </div>
            <label
              class="block text-sm justify-self-end font-medium text-gray-700 dark:text-gray-200"
            >
              <!-- Set a radio button Enabled/Disabled -->
              <app-radiotoggle
                title="Enabled/Disabled"
                identity="errorMessage"
                [control]="resultsForm.get('errorMessage') | formControl"
              ></app-radiotoggle>
            </label>
          </div>
          <div
            class="grid grid-cols-2 items-center sm:grid-cols-[1fr_13rem] gap-4"
          >
            <div class="relative flex flex-col gap-4">
              <label
                class="block before:content['*'] before:size-2 before:absolute before:text-sky-500 before:bg-green-700 before:shadow-xl before:shadow-gray-50 before:border before:border-sky-400 before:rounded-[50%] before:-left-4 before:top-[7px] text-base font-medium text-gray-700 dark:text-gray-200"
              >
                Session Id
              </label>

              <div
                class="block font-mono max-w-screen-md text-gray-800 dark:text-gray-200"
              >
                <span
                  >The ID of the session used for multi-page or persistent
                  crawling.</span
                >
              </div>
            </div>
            <label
              class="block text-sm justify-self-end font-medium text-gray-700 dark:text-gray-200"
            >
              <!-- Set a radio button Enabled/Disabled -->
              <app-radiotoggle
                title="Enabled/Disabled"
                identity="sessionId"
                [control]="resultsForm.get('sessionId') | formControl"
              ></app-radiotoggle>
            </label>
          </div>
          <div
            class="grid grid-cols-2 items-center sm:grid-cols-[1fr_13rem] gap-4"
          >
            <div class="relative flex flex-col gap-4">
              <label
                class="block before:content['*'] before:size-2 before:absolute before:text-sky-500 before:bg-green-700 before:shadow-xl before:shadow-gray-50 before:border before:border-sky-400 before:rounded-[50%] before:-left-4 before:top-[7px] text-base font-medium text-gray-700 dark:text-gray-200"
              >
                Response Headers
              </label>

              <div
                class="block font-mono max-w-screen-md text-gray-800 dark:text-gray-200"
              >
                <span>HTTP response headers, if captured.</span>
              </div>
            </div>
            <label
              class="block text-sm justify-self-end font-medium text-gray-700 dark:text-gray-200"
            >
              <!-- Set a radio button Enabled/Disabled -->
              <app-radiotoggle
                title="Enabled/Disabled"
                identity="responseHeaders"
                [control]="resultsForm.get('responseHeaders') | formControl"
              ></app-radiotoggle>
            </label>
          </div>
          <div
            class="grid grid-cols-2 items-center sm:grid-cols-[1fr_13rem] gap-4"
          >
            <div class="relative flex flex-col gap-4">
              <label
                class="block before:content['*'] before:size-2 before:absolute before:text-sky-500 before:bg-green-700 before:shadow-xl before:shadow-gray-50 before:border before:border-sky-400 before:rounded-[50%] before:-left-4 before:top-[7px] text-base font-medium text-gray-700 dark:text-gray-200"
              >
                SSL Certificate
              </label>

              <div
                class="block font-mono max-w-screen-md text-gray-800 dark:text-gray-200"
              >
                <span>SSL certificate info if </span>
                <p
                  class="text-sky-500 bg-sky-700/10 inline-block w-full xs:w-[initial]"
                >
                  fetch_ssl_certificate=True
                </p>
                <span>.</span>
              </div>
            </div>
            <label
              class="block text-sm justify-self-end font-medium text-gray-700 dark:text-gray-200"
            >
              <!-- Set a radio button Enabled/Disabled -->
              <app-radiotoggle
                title="Enabled/Disabled"
                identity="sslCertificate"
                [control]="resultsForm.get('sslCertificate') | formControl"
              ></app-radiotoggle>
            </label>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- right sidebar goes here bg-gray-100 dark:bg-[rgb(36_38_40)] -->
  <div
    class="static top-[10rem] mt-4 sm:mt-0 xl:mt-0 lg:mt-4 lg:static w-full max-h-min max-w-full mx-auto lg:h-auto h-auto sm:sticky xl:sticky bg-transparent sm:h-[calc(100vh_-_5rem)] xl:h-[calc(100vh_-_5rem)] order-1 sm:order-2 lg:order-1 xl:order-2 overflow-auto overflow-x-hidden scrollbar px-4 border-0 border-[#70b1ff] left-0"
  >
    <!--   h-auto top-0   -->
    <ul class="">
      <li
        class="flex relative before:h-7 before:top-[17px] before:-left-[9px] sm:before:top-[19px] sm:before:h-12 md:before:top-6 sm:before:-left-[9px] lg:before:top-5 lg:before:h-7 lg:before:-left-[9px] xl:before:top-6 2xl:before:top-5 before:absolute before:bottom-0 xl:before:h-12 2xl:before:h-7 xl:before:-left-[9px] before:border-l before:border-gray-400/30"
      >
        <a
          (click)="scrollTo('controlling-each-crawl-result')"
          [ngClass]="
            activeLink === 'controlling-each-crawl-result'
              ? ' text-sky-600 dark:text-[#bae0ff] before:block'
              : 'dark:text-gray-200 before:hidden'
          "
          class="cursor-pointer text-gray-600/60 hover:text-sky-600 focus:text-sky-700 dark:hover:text-[#bae0ff] dark:focus:text-[#bae0ff] font-bold p-3 hover:before:block before:content['*'] before:size-2 before:absolute before:text-sky-500 before:bg-green-700 before:shadow-xl before:shadow-gray-50 before:border before:border-sky-400 before:rounded-[50%] before:-left-[.9rem] lg:before:-left-[.8rem] before:top-[1.3rem]"
          ><span>Controlling Each CrawlResult</span></a
        >
      </li>
      <li
        *ngIf="showSettings"
        class="relative before:absolute before:top-0 before:bottom-0 before:-left-[9px] before:border-l before:border-gray-400/30"
      >
        <a
          (click)="scrollTo('html-variants')"
          [ngClass]="
            activeLink === 'html-variants'
              ? ' text-sky-600 dark:text-[#bae0ff] before:block'
              : 'dark:text-gray-100 before:hidden'
          "
          class="p-3 flex cursor-pointer text-gray-600 hover:text-sky-600 focus:text-sky-700 font-serif text-lg font-medium dark:hover:text-[#bae0ff] dark:focus:text-[#bae0ff] hover:before:block before:content['*'] before:size-2 before:absolute before:text-sky-500 before:bg-green-700 before:shadow-xl before:shadow-gray-50 before:border before:border-sky-400 before:rounded-[50%] before:-left-[.9rem] lg:before:-left-[.8rem] before:top-[1.3rem]"
          ><span>Html Variants</span></a
        >
      </li>

      <li
        *ngIf="showSettings"
        class="relative before:absolute before:top-0 before:bottom-0 before:-left-[9px] before:border-l before:border-gray-400/30"
      >
        <a
          (click)="scrollTo('markdown-generation')"
          [ngClass]="
            activeLink === 'markdown-generation'
              ? ' text-sky-600 dark:text-[#bae0ff] before:block'
              : 'dark:text-gray-100 before:hidden'
          "
          class="p-3 flex cursor-pointer text-gray-600 hover:text-sky-600 focus:text-sky-700 font-serif text-lg font-medium dark:hover:text-[#bae0ff] dark:focus:text-[#bae0ff] hover:before:block before:content['*'] before:size-2 before:absolute before:text-sky-500 before:bg-green-700 before:shadow-xl before:shadow-gray-50 before:border before:border-sky-400 before:rounded-[50%] before:-left-[.9rem] lg:before:-left-[.8rem] before:top-[1.3rem]"
          ><span>Markdown Generation</span></a
        >
      </li>
      <li
        *ngIf="showSettings"
        class="relative before:absolute before:top-0 before:bottom-0 before:-left-[9px] before:border-l before:border-gray-400/30"
      >
        <a
          (click)="scrollTo('structured-extraction')"
          [ngClass]="
            activeLink === 'structured-extraction'
              ? ' text-sky-600 dark:text-[#bae0ff] before:block'
              : 'dark:text-gray-100 before:hidden'
          "
          class="p-3 flex cursor-pointer text-gray-600 hover:text-sky-600 focus:text-sky-700 font-serif text-lg font-medium dark:hover:text-[#bae0ff] dark:focus:text-[#bae0ff] hover:before:block before:content['*'] before:size-2 before:absolute before:text-sky-500 before:bg-green-700 before:shadow-xl before:shadow-gray-50 before:border before:border-sky-400 before:rounded-[50%] before:-left-[.9rem] lg:before:-left-[.8rem] before:top-[1.3rem]"
          ><span>Structured Extraction</span></a
        >
      </li>

      <li
        *ngIf="showSettings"
        class="relative before:absolute before:h-[calc(100%_-_(8px_+_1rem))] before:top-0 before:bottom-0 before:-left-[9px] before:border-l before:border-gray-400/30"
      >
        <a
          (click)="scrollTo('more-fields')"
          [ngClass]="
            activeLink === 'more-fields'
              ? ' text-sky-600 dark:text-[#bae0ff] before:block'
              : 'dark:text-gray-100 before:hidden'
          "
          class="p-3 flex cursor-pointer text-gray-600 hover:text-sky-600 focus:text-sky-700 font-serif text-lg font-medium dark:hover:text-[#bae0ff] dark:focus:text-[#bae0ff] hover:before:block before:content['*'] before:size-2 before:absolute before:text-sky-500 before:bg-green-700 before:shadow-xl before:shadow-gray-50 before:border before:border-sky-400 before:rounded-[50%] before:-left-[.9rem] lg:before:-left-[.8rem] before:top-[1.3rem]"
          ><span>More Fields</span></a
        >
      </li>
    </ul>
  </div>
</form>
